{"remainingRequest":"C:\\Users\\jessica\\Documents\\git\\vue-test\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\jessica\\Documents\\git\\vue-test\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\jessica\\Documents\\git\\vue-test\\src\\data\\requests.js","dependencies":[{"path":"C:\\Users\\jessica\\Documents\\git\\vue-test\\src\\data\\requests.js","mtime":1544107054357},{"path":"C:\\Users\\jessica\\Documents\\git\\vue-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1545311097356},{"path":"C:\\Users\\jessica\\Documents\\git\\vue-test\\node_modules\\babel-loader\\lib\\index.js","mtime":1545311081350},{"path":"C:\\Users\\jessica\\Documents\\git\\vue-test\\node_modules\\eslint-loader\\index.js","mtime":1545311087492}],"contextDependencies":[],"result":["import _typeof from \"C:\\\\Users\\\\jessica\\\\Documents\\\\git\\\\vue-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/typeof\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\jessica\\\\Documents\\\\git\\\\vue-test\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport QueryString from \"querystring\";\nimport { ERROR_INVALID_RESPONSE } from \"./datasourceConst\";\nimport { selectedLocale } from \"../locale\";\nvar API_HOST = process.env.VUE_APP_ROOT_API;\n\nfunction URLForEndpoint(endpoint) {\n  var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var url = API_HOST + endpoint;\n\n  if (params !== null) {\n    if (params[\"query\"] !== null) {\n      var temp = JSON.stringify(params[\"query\"]);\n      params[\"query\"] = temp;\n    }\n\n    url += \"?\" + QueryString.stringify(params);\n  }\n\n  return url;\n}\n\nfunction NewRequest(method) {\n  var authToken = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var hasContentType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  var headers = new Headers();\n\n  if (hasContentType) {\n    headers.append(\"Content-Type\", \"application/json\");\n  }\n\n  if (authToken !== null) {\n    headers.append(\"Authorization\", \"Bearer \" + authToken);\n  }\n\n  var locale = selectedLocale();\n  headers.append(\"locale\", locale.toLowerCase()); // Return fetch request body\n\n  return {\n    method: method,\n    headers: headers\n  };\n}\n\nfunction NewHtmlRequest(method) {\n  var authToken = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  var headers = new Headers();\n  headers.append(\"Content-Type\", \"text/html\");\n\n  if (authToken !== null) {\n    headers.append(\"Authorization\", \"Bearer \" + authToken);\n  } // Return fetch request body\n\n\n  return {\n    method: method,\n    headers: headers\n  };\n}\n\nfunction parseResponseAndHandleErrors(_x) {\n  return _parseResponseAndHandleErrors.apply(this, arguments);\n}\n\nfunction _parseResponseAndHandleErrors() {\n  _parseResponseAndHandleErrors = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee(response) {\n    var responseStatusNumber, json;\n    return regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // If not successful, throw JSON as response\n            responseStatusNumber = Number(response.status);\n\n            if (!(responseStatusNumber >= 400 && responseStatusNumber <= 599)) {\n              _context.next = 5;\n              break;\n            }\n\n            _context.next = 4;\n            return response.json();\n\n          case 4:\n            throw _context.sent;\n\n          case 5:\n            _context.prev = 5;\n            _context.next = 8;\n            return response.json();\n\n          case 8:\n            json = _context.sent;\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](5);\n            throw ERROR_INVALID_RESPONSE;\n\n          case 14:\n            if (!(json === undefined)) {\n              _context.next = 16;\n              break;\n            }\n\n            throw ERROR_INVALID_RESPONSE;\n\n          case 16:\n            return _context.abrupt(\"return\", json);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this, [[5, 11]]);\n  }));\n  return _parseResponseAndHandleErrors.apply(this, arguments);\n}\n\nfunction parseObject(_x2) {\n  return _parseObject.apply(this, arguments);\n}\n\nfunction _parseObject() {\n  _parseObject = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee2(response) {\n    var responseStatusNumber, json;\n    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            // If not successful, throw JSON as response\n            responseStatusNumber = Number(response.status);\n\n            if (!(responseStatusNumber >= 400 && responseStatusNumber <= 599)) {\n              _context2.next = 5;\n              break;\n            }\n\n            _context2.next = 4;\n            return response.text();\n\n          case 4:\n            throw _context2.sent;\n\n          case 5:\n            console.log(response);\n            console.log(response.d); // Parse response\n\n            _context2.prev = 7;\n            _context2.next = 10;\n            return response.text();\n\n          case 10:\n            json = _context2.sent;\n            console.log(_typeof(json));\n            _context2.next = 17;\n            break;\n\n          case 14:\n            _context2.prev = 14;\n            _context2.t0 = _context2[\"catch\"](7);\n            throw ERROR_INVALID_RESPONSE;\n\n          case 17:\n            if (!(json === undefined)) {\n              _context2.next = 19;\n              break;\n            }\n\n            throw ERROR_INVALID_RESPONSE;\n\n          case 19:\n            return _context2.abrupt(\"return\", json);\n\n          case 20:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this, [[7, 14]]);\n  }));\n  return _parseObject.apply(this, arguments);\n}\n\nexport { URLForEndpoint, NewRequest, NewHtmlRequest, parseObject, parseResponseAndHandleErrors };",{"version":3,"sources":["C:\\Users\\jessica\\Documents\\git\\vue-test\\src\\data\\requests.js"],"names":["QueryString","ERROR_INVALID_RESPONSE","selectedLocale","API_HOST","process","env","VUE_APP_ROOT_API","URLForEndpoint","endpoint","params","url","temp","JSON","stringify","NewRequest","method","authToken","hasContentType","headers","Headers","append","locale","toLowerCase","NewHtmlRequest","parseResponseAndHandleErrors","response","responseStatusNumber","Number","status","json","undefined","parseObject","text","console","log","d"],"mappings":"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","sourcesContent":["import QueryString from \"querystring\";\r\nimport {ERROR_INVALID_RESPONSE} from \"./datasourceConst\";\r\nimport {selectedLocale} from \"../locale\";\r\n\r\nconst API_HOST = process.env.VUE_APP_ROOT_API;\r\n\r\nfunction URLForEndpoint(endpoint, params = null) {\r\n    let url = API_HOST + endpoint;\r\n\r\n    if (params !== null) {\r\n        if (params[\"query\"] !== null) {\r\n            let temp = JSON.stringify(params[\"query\"]);\r\n            params[\"query\"] = temp;\r\n        }\r\n        url += \"?\" + QueryString.stringify(params);\r\n    }\r\n\r\n    return url;\r\n}\r\n\r\nfunction NewRequest(method, authToken = null, hasContentType = true) {\r\n    const headers = new Headers();\r\n    if (hasContentType) {\r\n        headers.append(\"Content-Type\", \"application/json\");\r\n    }\r\n\r\n    if (authToken !== null) {\r\n        headers.append(\"Authorization\", \"Bearer \" + authToken);\r\n    }\r\n\r\n    let locale = selectedLocale();\r\n    headers.append(\"locale\", locale.toLowerCase());\r\n\r\n    // Return fetch request body\r\n    return {\r\n        method,\r\n        headers,\r\n    };\r\n}\r\n\r\nfunction NewHtmlRequest(method, authToken = null) {\r\n    const headers = new Headers();\r\n    headers.append(\"Content-Type\", \"text/html\");\r\n    if (authToken !== null) {\r\n        headers.append(\"Authorization\", \"Bearer \" + authToken);\r\n    }\r\n\r\n    // Return fetch request body\r\n    return {\r\n        method,\r\n        headers,\r\n    };\r\n}\r\n\r\nasync function parseResponseAndHandleErrors(response) {\r\n    // If not successful, throw JSON as response\r\n    let responseStatusNumber = Number(response.status);\r\n    if (responseStatusNumber >= 400 && responseStatusNumber <= 599) {\r\n        throw await response.json();\r\n    }\r\n    // Parse response\r\n    let json;\r\n    try {\r\n        json = await response.json();\r\n    } catch (err) {\r\n        throw ERROR_INVALID_RESPONSE;\r\n    }\r\n\r\n    if (json === undefined) {\r\n        throw ERROR_INVALID_RESPONSE;\r\n    }\r\n\r\n    return json;\r\n}\r\n\r\nasync function parseObject(response) {\r\n    // If not successful, throw JSON as response\r\n    let responseStatusNumber = Number(response.status);\r\n    if (responseStatusNumber >= 400 && responseStatusNumber <= 599) {\r\n        throw await response.text();\r\n    }\r\n\r\n    console.log(response)\r\n    console.log(response.d)\r\n    // Parse response\r\n    let json;\r\n    try {\r\n        json = await response.text();\r\n        console.log(typeof json)\r\n    } catch (err) {\r\n        throw ERROR_INVALID_RESPONSE;\r\n    }\r\n\r\n    if (json === undefined) {\r\n        throw ERROR_INVALID_RESPONSE;\r\n    }\r\n\r\n    return json;\r\n}\r\n\r\n\r\nexport {URLForEndpoint, NewRequest, NewHtmlRequest, parseObject, parseResponseAndHandleErrors};"]}]}