!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function o(e,t){var n=new i(e,t),o=n.on,s=n.bind,r=n.option;e.upload=n,Object.defineProperties(e.prototype,{$upload:{get:function(){return n.on=o.bind(this),n.bind=s.bind(this),n.option=r.bind(this),n}}})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1)();"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),t.default=o},function(e,t){e.exports=function(){function e(e){e.preventDefault(),e.stopPropagation()}function t(){return Math.random().toString(32).substring(2)}function n(e){return e.data.errors?e.data.errors[0]||{}:e.data.msg?{code:e.data.code,msg:e.data.msg}:{}}function o(e){P.Vue.http.post(e.url,e.body,{progress:e.progress}).then(e.success,e.error)}function i(e){P.instances[e]||(P.Vue.set(P.$vm.instances,e,{files:{all:[],queue:[],progress:[],upload:[],success:[],error:[]},errors:[],meta:{state:"ready",percentComplete:0},dropzone:{active:!1}}),P.instances[e]={key:e,$vm:P.$vm.instances[e]})}function s(){var e,t,n=this;for(e=0,t=this.$vm.files.all.length;e<t;e++)!function(e){v.call(n,n.$vm.files.all[e])}(e);this.$vm.files={all:[],queue:[],progress:[],upload:[],success:[],error:[]},this.$vm.errors=[],this.$vm.meta.state="ready",this.$vm.meta.percentComplete=0,this.$vm.dropzone.active=!1}function r(e,t,n){var o=P.instances[e];o.options=Object.assign({},P.options,n),o.input=p.call(o),o.dropzone=f.call(o),l.call(o,t)}function l(e){this.onSelect=this.options.onSelect?this.options.onSelect.bind(e):function(){},this.onStart=this.options.onStart?this.options.onStart.bind(e):function(){},this.onQueue=this.options.onQueue?this.options.onQueue.bind(e):function(){},this.onProgress=this.options.onProgress?this.options.onProgress.bind(e):function(){},this.onUpload=this.options.onUpload?this.options.onUpload.bind(e):function(){},this.onError=this.options.onError?this.options.onError.bind(e):function(){},this.onSuccess=this.options.onSuccess?this.options.onSuccess.bind(e):function(){},this.onComplete=this.options.onComplete?this.options.onComplete.bind(e):function(){},this.onEnd=this.options.onEnd?this.options.onEnd.bind(e):function(){}}function a(e,t){if(this.options[e]=t,"dropzone"===e)return d.call(this),void(this.dropzone=f.call(this))}function c(e){var t=P.instances[e];u.call(t),d.call(t),delete t.$vm,delete P.instances[e]}function p(){var e,t=this;return e=document.createElement("input"),e.type="file",e.multiple=!0===this.options.multiple,e.accept=this.options.accept?this.options.accept:"*/*",e.style.display="none",e.onchange=function(){g.call(t,e.files),e.value=null},document.body.appendChild(e),{$el:e}}function u(){this.input.$el.parentNode.removeChild(this.input.$el),this.input.$el=null}function f(){var t,n=this;return t={$el:document.getElementById(this.options.dropzoneId),counter:0,dragenter:null,drageover:null,dragleave:null,drop:null},t.$el&&(t.dragenter=function(t){e(t),n.dropzone.counter++,n.$vm.dropzone.active=!0},t.dragover=function(t){e(t),t.dataTransfer.dropEffect="copy",n.$vm.dropzone.active=!0},t.dragleave=function(t){e(t),0===--n.dropzone.counter&&(n.$vm.dropzone.active=!1)},t.drop=function(t){e(t),n.$vm.dropzone.active=!1,g.call(n,t.dataTransfer.files)},t.$el.addEventListener("dragenter",t.dragenter,!1),t.$el.addEventListener("dragover",t.dragover,!1),t.$el.addEventListener("dragleave",t.dragleave,!1),t.$el.addEventListener("drop",t.drop,!1)),t}function d(){this.dropzone.$el&&(this.dropzone.$el.removeEventListener("dragenter",this.dropzone.dragenter,!1),this.dropzone.$el.removeEventListener("dragover",this.dropzone.dragover,!1),this.dropzone.$el.removeEventListener("dragleave",this.dropzone.dragleave,!1),this.dropzone.$el.removeEventListener("drop",this.dropzone.drop,!1),this.dropzone.dragenter=null,this.dropzone.dragover=null,this.dropzone.dragleave=null,this.dropzone.drop=null,this.dropzone.$el=null)}function h(e){var n,o;if(e=e||{},e.unique)for(n=0,o=this.$vm.errors.length;n<o;n++)if(this.$vm.errors[n].code===e.code)return;e.$id=t(),e.file=e.file||null,e.clear=m.bind(this,e),e.file&&(e.file.errors.push(e),e.file.error=e),this.$vm.errors.push(e)}function m(e){var t,n;if(e)for(t=0,n=this.$vm.errors.length;t<n;t++)if(this.$vm.errors[t].$id===e.$id){this.$vm.errors.splice(t,1);break}}function v(e){var t,n,o;if(e){for(e.$request&&e.$request.abort(),t=0,n=this.$vm.errors.length;t<n;t++)if(this.$vm.errors[t].file&&this.$vm.errors[t].file.$id===e.$id){this.$vm.errors.splice(t,1);break}o=y.call(this,e),this.$vm.files[e.state].splice(o,1),o=y.call(this,e,"all"),this.$vm.files.all.splice(o,1)}}function $(e,t){var n=new FileReader;n.addEventListener("load",function(){e.$raw=n.result,t&&t(e)},!1),e.$file&&n.readAsDataURL(e.$file)}function g(e){var t,n,o=this;if(e.length>this.options.maxFilesSelect)return h.call(this,{unique:!0,code:"file-max-select",msg:this.options.maxFilesSelectMsg.replace("{max}",this.options.maxFilesSelect)}),void this.onSelect(e);for(t=0,n=e.length;t<n;t++)!function(t){x.call(o,e[t])}(t);this.onSelect(e),this.options.startOnSelect&&S.call(this)}function x(e){var n,o,i,s=this;o=(e.name||"").split("."),n=(e.type||"").split("/"),i=o.length>1?o[o.length-1]:null,i=i||(n[1]||null),i=(i||"").toLowerCase(),n=n[0]||null,e={$id:t(),$file:e,$request:null,$raw:null,$instance:this,name:e.name,size:e.size,type:n,extension:i,state:"queue",active:!0,sending:!1,errors:[],error:{},percentComplete:0,preview:function(t){$(e,t)}},e.clear=function(){v.call(s,e),"uploading"===s.$vm.meta.state&&S.call(s)},this.$vm.files.all.push(e),this.$vm.files.queue.push(e),z.call(this,e)||this.onError(e),this.onQueue(e)}function y(e,t){var n,o,i;for(i=this.$vm.files[t||e.state],n=0,o=i.length;n<o;n++)if(e.$id===i[n].$id)return n;return-1}function b(e,t){var n;n=y.call(this,e),this.$vm.files[e.state].splice(n,1),this.$vm.files[t].push(e),e.state=t}function z(e){var t;return this.options.extensions&&this.options.extensions.indexOf(e.extension)<0?t={file:e,code:"file-extension",msg:this.options.invalidExtensionMsg.replace("{extensions}",this.options.extensions.join(", "))}:this.options.maxSizePerFile>0&&e.size>this.options.maxSizePerFile&&(t={file:e,code:"file-max-size",msg:this.options.maxFileSizeMsg.replace("{max}",Math.floor(this.options.maxSizePerFile/1024/1024))}),!t||(h.call(this,t),!1)}function S(){var e,t,n;if(!(this.$vm.files.progress.length>=this.options.maxFilesInProgress))if(this.$vm.files.queue.length){if(!this.$vm.files.queue.length||"ready"!==this.$vm.meta.state&&"complete"!==this.$vm.meta.state||this.onStart(),n=this.$vm.files.queue[0],!z.call(this,n))return b.call(this,n,"error"),this.onError(n),void S.call(this);this.$vm.meta.state="uploading",E.call(this,n),S.call(this)}else if(!this.$vm.files.progress.length&&"uploading"===this.$vm.meta.state){for(this.$vm.meta.state="complete",e=0,t=this.$vm.files.all.length;e<t;e++)this.$vm.files.all[e].active=!1;this.onEnd()}}function E(e){var t,n,o,i=this;e.sending=!0,b.call(this,e,"progress"),n=new FormData,n.append(this.options.name,e.$file);for(t in e.$instance.options.body)n.append(t,e.$instance.options.body[t]);o=this.options.http({url:e.$instance.options.url,body:n,progress:function(t){e.percentComplete=t.lengthComputable?Math.ceil(t.loaded/t.total*100):0,i.onProgress(e,t),e.percentComplete>=100&&(b.call(i,e,"upload"),i.onUpload(e,t)),C.call(i)},success:function(t){e.sending=!1,b.call(i,e,"success"),i.onSuccess(e,t),i.onComplete(e,t),S.call(i)},error:function(t){var n;e.sending=!1,n=i.options.parseErrors(t),n.file=e,h.call(i,n),b.call(i,e,"error"),i.onError(e,t),i.onComplete(e,t),S.call(i)}}),e.$request=o}function C(){var e,t,n,o;for(o=0,e=0,t=this.$vm.files.all.length;e<t;e++)this.$vm.files.all[e].active&&o++;for(n=100*(o-this.$vm.files.queue.length-this.$vm.files.progress.length),e=0,t=this.$vm.files.progress.length;e<t;e++)n+=this.$vm.files.progress[e].percentComplete;this.$vm.meta.percentComplete=Math.ceil(n/(100*o)*100)}function F(e,t){this.options=Object.assign({},w,t),this.Vue=e,this.$vm=new e({data:function(){return{instances:{}}}}),this.instances={},P=this}var P=null,w={url:null,name:"file",accept:null,body:{},dropzoneId:null,onSelect:null,onStart:null,onQueue:null,onProgress:null,onUpload:null,onError:null,onSuccess:null,onComplete:null,onEnd:null,startOnSelect:!0,extensions:["jpeg","jpg","png","gif"],multiple:!1,maxFilesSelect:4,maxFilesInProgress:2,maxSizePerFile:2097152,maxFilesSelectMsg:"Max of {max} files can be selected at a time.",maxFileSizeMsg:"Max of {max} mb per file.",invalidExtensionMsg:"File must be one of {extensions}.",parseErrors:n,http:o};return F.prototype.on=function(e,t){i(e),r(e,this,t)},F.prototype.off=function(e){c(e)},F.prototype.bind=function(e){l.call(P.instances[e],this)},F.prototype.reset=function(e){i(e),s.call(P.instances[e])},F.prototype.select=function(e){P.instances[e].input.$el.click()},F.prototype.start=function(e){i(e),S.call(P.instances[e])},F.prototype.files=function(e){return i(e),P.instances[e].$vm.files},F.prototype.file=function(e){var t;return i(e),t=P.instances[e].$vm,t.files.all[t.files.all.length-1]||{error:{}}},F.prototype.exists=function(e){return!!P.instances[e]},F.prototype.meta=function(e){return i(e),P.instances[e].$vm.meta},F.prototype.percent=function(e){return i(e),P.instances[e].$vm.meta.percentComplete},F.prototype.state=function(e){return i(e),P.instances[e].$vm.meta.state},F.prototype.dropzone=function(e){return i(e),P.instances[e].$vm.dropzone},F.prototype.option=function(e,t,n){i(e),a.call(P.instances[e],t,n),l.call(P.instances[e],this)},F.prototype.errors=function(e){return i(e),P.instances[e].$vm.errors},F}}])});