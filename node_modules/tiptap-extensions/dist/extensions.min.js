
    /*!
    * tiptap-extensions v1.13.0
    * (c) 2019 Scrumpy UG (limited liability)
    * @license MIT
    */


!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("tiptap"),require("tiptap-commands"),require("lowlight/lib/core"),require("prosemirror-view"),require("prosemirror-utils"),require("prosemirror-state"),require("prosemirror-tables"),require("tiptap-utils"),require("prosemirror-history")):"function"==typeof define&&define.amd?define(["exports","tiptap","tiptap-commands","lowlight/lib/core","prosemirror-view","prosemirror-utils","prosemirror-state","prosemirror-tables","tiptap-utils","prosemirror-history"],e):e((t=t||self).tiptap={},t.tiptap,t.tiptapCommands,t.low,t.prosemirrorView,t.prosemirrorUtils,t.prosemirrorState,t.prosemirrorTables,t.tiptapUtils,t.prosemirrorHistory)}(this,function(t,l,O,i,g,a,M,n,f,r){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}i=i&&i.hasOwnProperty("default")?i.default:i;var e=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return O.toggleWrap(e,n.nodes.paragraph)}}},{key:"keys",value:function(t){var e=t.type;return{"Ctrl->":O.toggleWrap(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[O.wrappingInputRule(/^\s*>\s$/,e)]}},{key:"name",get:function(){return"blockquote"}},{key:"schema",get:function(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}}}}]),e}(),k=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return O.toggleList(e,n.nodes.list_item)}}},{key:"keys",value:function(t){var e=t.type,n=t.schema;return{"Shift-Ctrl-8":O.toggleList(e,n.nodes.list_item)}}},{key:"inputRules",value:function(t){var e=t.type;return[O.wrappingInputRule(/^\s*([-+*])\s$/,e)]}},{key:"name",get:function(){return"bullet_list"}},{key:"schema",get:function(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}}}}]),e}(),b=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return O.toggleBlockType(e,n.nodes.paragraph)}}},{key:"keys",value:function(t){var e=t.type;return{"Shift-Ctrl-\\":O.setBlockType(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[O.textblockTypeInputRule(/^```$/,e)]}},{key:"name",get:function(){return"code_block"}},{key:"schema",get:function(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}}}}]),e}();function w(t){var e=t.doc,n=t.name,o=[],r=a.findBlockNodes(e).filter(function(t){return t.node.type.name===n});return r.forEach(function(t){var r=t.pos+1;(function n(t){return t.reduce(function(t,e){return t.concat(Array.isArray(e)?n(e):e)},[])})(function n(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return t.map(function(t){var e=v(r).concat(v(t.properties?t.properties.className:[]));return t.children?n(t.children,e):{text:t.value,classes:e}})}(i.highlightAuto(t.node.textContent).value)).map(function(t){var e=r,n=e+t.text.length;return C({},t,{from:e,to:r=n})}).forEach(function(t){var e=g.Decoration.inline(t.from,t.to,{class:t.classes.join(" ")});o.push(e)})}),g.DecorationSet.create(e,o)}function D(t){var u=t.name;return new l.Plugin({name:new l.PluginKey("highlight"),state:{init:function(t,e){return w({doc:e.doc,name:u})},apply:function(t,e,n,r){var o=r.selection.$head.parent.type.name,i=n.selection.$head.parent.type.name;return t.docChanged&&[o,i].includes(u)?w({doc:t.doc,name:u}):e.map(t.mapping,t.doc)}},props:{decorations:function(t){return this.getState(t)}}})}var x=function(t){function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o(this,n),t=h(this,d(n).call(this,e));try{Object.entries(t.options.languages).forEach(function(t){var e=m(t,2),n=e[0],r=e[1];i.registerLanguage(n,r)})}catch(t){throw new Error("Invalid syntax highlight definitions: define at least one highlight.js language mapping")}return t}return p(n,l.Node),c(n,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return O.toggleBlockType(e,n.nodes.paragraph)}}},{key:"keys",value:function(t){var e=t.type;return{"Shift-Ctrl-\\":O.setBlockType(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[O.textblockTypeInputRule(/^```$/,e)]}},{key:"name",get:function(){return"code_block"}},{key:"defaultOptions",get:function(){return{languages:{}}}},{key:"schema",get:function(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}}}},{key:"plugins",get:function(){return[D({name:this.name})]}}]),n}(),R=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"keys",value:function(t){var n=t.type,e=O.chainCommands(O.exitCode,function(t,e){return e(t.tr.replaceSelectionWith(n.create()).scrollIntoView()),!0});return{"Mod-Enter":e,"Shift-Enter":e}}},{key:"name",get:function(){return"hard_break"}},{key:"schema",get:function(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}}}]),e}(),_=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(t){return O.toggleBlockType(e,n.nodes.paragraph,t)}}},{key:"keys",value:function(t){var n=t.type;return this.options.levels.reduce(function(t,e){return C({},t,s({},"Shift-Ctrl-".concat(e),O.setBlockType(n,{level:e})))},{})}},{key:"inputRules",value:function(t){var e=t.type;return this.options.levels.map(function(t){return O.textblockTypeInputRule(new RegExp("^(#{1,".concat(t,"})\\s$")),e,function(){return{level:t}})})}},{key:"name",get:function(){return"heading"}},{key:"defaultOptions",get:function(){return{levels:[1,2,3,4,5,6]}}},{key:"schema",get:function(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map(function(t){return{tag:"h".concat(t),attrs:{level:t}}}),toDOM:function(t){return["h".concat(t.attrs.level),0]}}}}]),e}(),T=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"commands",value:function(t){var n=t.type;return function(){return function(t,e){return e(t.tr.replaceSelectionWith(n.create()))}}}},{key:"inputRules",value:function(t){var e=t.type;return[O.nodeInputRule(/^(?:---|___\s|\*\*\*\s)$/,e)]}},{key:"name",get:function(){return"horizontal_rule"}},{key:"schema",get:function(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}}}}]),e}(),A=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"commands",value:function(t){var u=t.type;return function(i){return function(t,e){var n=t.selection,r=n.$cursor?n.$cursor.pos:n.$to.pos,o=u.create(i);e(t.tr.insert(r,o))}}}},{key:"name",get:function(){return"image"}},{key:"schema",get:function(){return{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){return["img",t.attrs]}}}},{key:"plugins",get:function(){return[new l.Plugin({props:{handleDOMEvents:{drop:function(r,t){if(t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length){var e=Array.from(t.dataTransfer.files).filter(function(t){return/image/i.test(t.type)});if(0!==e.length){t.preventDefault();var o=r.state.schema,i=r.posAtCoords({left:t.clientX,top:t.clientY});e.forEach(function(t){var e=new FileReader;e.onload=function(t){var e=o.nodes.image.create({src:t.target.result}),n=r.state.tr.insert(i.pos,e);r.dispatch(n)},e.readAsDataURL(t)})}}}}}})]}}]),e}(),S=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"keys",value:function(t){var e=t.type;return{Enter:O.splitListItem(e),Tab:O.sinkListItem(e),"Shift-Tab":O.liftListItem(e)}}},{key:"name",get:function(){return"list_item"}},{key:"schema",get:function(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}}}}]),e}();function I(t){var e=t.matcher,f=void 0===e?{char:"@",allowSpaces:!1,startOfLine:!1}:e,n=t.appendText,y=void 0===n?null:n,r=t.suggestionClass,i=void 0===r?"suggestion":r,o=t.command,h=void 0===o?function(){return!1}:o,u=t.items,m=void 0===u?[]:u,a=t.onEnter,v=void 0===a?function(){return!1}:a,c=t.onChange,k=void 0===c?function(){return!1}:c,s=t.onExit,b=void 0===s?function(){return!1}:s,l=t.onKeyDown,p=void 0===l?function(){return!1}:l,d=t.onFilter,w=void 0===d?function(t,e){return e?t.filter(function(t){return JSON.stringify(t).toLowerCase().includes(e.toLowerCase())}):t}:d;return new M.Plugin({key:new M.PluginKey("suggestions"),view:function(){var g=this;return{update:function(r,t){var e=g.key.getState(t),n=g.key.getState(r.state),o=e.active&&n.active&&e.range.from!==n.range.from,i=!e.active&&n.active,u=e.active&&!n.active,a=i||o,c=!i&&!u&&e.query!==n.query&&!o,s=u||o;if(a||c||s){var l=s?e:n,f=document.querySelector('[data-decoration-id="'.concat(l.decorationId,'"]')),p=f?{getBoundingClientRect:function(){return f.getBoundingClientRect()},clientWidth:f.clientWidth,clientHeight:f.clientHeight}:null,d={view:r,range:l.range,query:l.query,text:l.text,decorationNode:f,virtualNode:p,items:w(Array.isArray(m)?m:m(),l.query),command:function(t){var e=t.range,n=t.attrs;h({range:e,attrs:n,schema:r.state.schema})(r.state,r.dispatch,r),y&&O.insertText(y)(r.state,r.dispatch,r)}};s&&b(d),c&&k(d),a&&v(d)}}}},state:{init:function(){return{active:!1,range:{},query:null,text:null}},apply:function(t,e){var n,r,d,o,g,i,y,u=t.selection,a=C({},e);if(u.from===u.to){(u.from<e.range.from||u.from>e.range.to)&&(a.active=!1);var c=u.$from,s=(r=(n=f).char,d=void 0===r?"@":r,o=n.allowSpaces,g=void 0!==o&&o,i=n.startOfLine,y=void 0!==i&&i,function(t){for(var e,n="\\".concat(d),r=new RegExp("\\s".concat(n,"$")),o=y?"^":"",i=g?new RegExp("".concat(o).concat(n,".*?(?=\\s").concat(n,"|$)"),"gm"):new RegExp("".concat(o,"(?:^)?").concat(n,"[^\\s").concat(n,"]*"),"gm"),u=t.before(),a=t.end(),c=t.doc.textBetween(u,a,"\0","\0"),s=i.exec(c);null!==s;){var l=s.input.slice(Math.max(0,s.index-1),s.index);if(/^[\s\0]?$/.test(l)){var f=s.index+t.start(),p=f+s[0].length;g&&r.test(c.slice(p-1,p+1))&&(s[0]+=" ",p+=1),f<t.pos&&p>=t.pos&&(e={range:{from:f,to:p},query:s[0].slice(d.length),text:s[0]})}s=i.exec(c)}return e}(c)),l=(Math.random()+1).toString(36).substr(2,5);s?(a.active=!0,a.decorationId=e.decorationId?e.decorationId:l,a.range=s.range,a.query=s.query,a.text=s.text):a.active=!1}else a.active=!1;return a.active||(a.decorationId=null,a.range={},a.query=null,a.text=null),a}},props:{handleKeyDown:function(t,e){var n=this.getState(t.state),r=n.active,o=n.range;return!!r&&p({view:t,event:e,range:o})},decorations:function(t){var e=this.getState(t),n=e.active,r=e.range,o=e.decorationId;return n?g.DecorationSet.create(t.doc,[g.Decoration.inline(r.from,r.to,{nodeName:"span",class:i,"data-decoration-id":o})]):null}}})}var E=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"commands",value:function(t){var e=this,n=t.schema;return function(t){return O.replaceText(null,n.nodes[e.name],t)}}},{key:"name",get:function(){return"mention"}},{key:"defaultOptions",get:function(){return{matcher:{char:"@",allowSpaces:!1,startOfLine:!1},mentionClass:"mention",suggestionClass:"mention-suggestion"}}},{key:"schema",get:function(){var e=this;return{attrs:{id:{},label:{}},group:"inline",inline:!0,selectable:!1,atom:!0,toDOM:function(t){return["span",{class:e.options.mentionClass,"data-mention-id":t.attrs.id},"".concat(e.options.matcher.char).concat(t.attrs.label)]},parseDOM:[{tag:"span[data-mention-id]",getAttrs:function(t){return{id:t.getAttribute("data-mention-id"),label:t.innerText.split(e.options.matcher.char).join("")}}}]}}},{key:"plugins",get:function(){var o=this;return[I({command:function(t){var e=t.range,n=t.attrs,r=t.schema;return O.replaceText(e,r.nodes[o.name],n)},appendText:" ",matcher:this.options.matcher,items:this.options.items,onEnter:this.options.onEnter,onChange:this.options.onChange,onExit:this.options.onExit,onKeyDown:this.options.onKeyDown,onFilter:this.options.onFilter,suggestionClass:this.options.suggestionClass})]}}]),e}(),N=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return O.toggleList(e,n.nodes.list_item)}}},{key:"keys",value:function(t){var e=t.type,n=t.schema;return{"Shift-Ctrl-9":O.toggleList(e,n.nodes.list_item)}}},{key:"inputRules",value:function(t){var e=t.type;return[O.wrappingInputRule(/^(\d+)\.\s$/,e,function(t){return{order:+t[1]}},function(t,e){return e.childCount+e.attrs.order===+t[1]})]}},{key:"name",get:function(){return"ordered_list"}},{key:"schema",get:function(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM:function(t){return 1===t.attrs.order?["ol",0]:["ol",{start:t.attrs.order},0]}}}}]),e}(),q=n.tableNodes({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:function(t){return t.style.backgroundColor||null},setDOMAttr:function(t,e){if(t){var n={style:"".concat(e.style||"","background-color: ").concat(t,";")};Object.assign(e,n)}}}}}),P=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"commands",value:function(t){var u=t.schema;return{createTable:function(t){var r=t.rowsCount,o=t.colsCount,i=t.withHeaderRow;return function(t,e){var n=a.createTable(u,r,o,i);e(t.tr.replaceSelectionWith(n).scrollIntoView())}},addColumnBefore:function(){return n.addColumnBefore},addColumnAfter:function(){return n.addColumnAfter},deleteColumn:function(){return n.deleteColumn},addRowBefore:function(){return n.addRowBefore},addRowAfter:function(){return n.addRowAfter},deleteRow:function(){return n.deleteRow},deleteTable:function(){return n.deleteTable},toggleCellMerge:function(){return function(t,e){n.mergeCells(t,e)||n.splitCell(t,e)}},mergeCells:function(){return n.mergeCells},splitCell:function(){return n.splitCell},toggleHeaderColumn:function(){return n.toggleHeaderColumn},toggleHeaderRow:function(){return n.toggleHeaderRow},toggleHeaderCell:function(){return n.toggleHeaderCell},setCellAttr:function(){return n.setCellAttr},fixTables:function(){return n.fixTables}}}},{key:"keys",value:function(){return{Tab:n.goToNextCell(1),"Shift-Tab":n.goToNextCell(-1)}}},{key:"name",get:function(){return"table"}},{key:"schema",get:function(){return q.table}},{key:"plugins",get:function(){return[n.columnResizing(),n.tableEditing()]}}]),e}(),$=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"name",get:function(){return"table_header"}},{key:"schema",get:function(){return q.table_header}}]),e}(),j=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"name",get:function(){return"table_cell"}},{key:"schema",get:function(){return q.table_cell}}]),e}(),L=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"name",get:function(){return"table_row"}},{key:"schema",get:function(){return q.table_row}}]),e}(),B=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"keys",value:function(t){var e=t.type;return{Enter:O.splitToDefaultListItem(e),"Shift-Tab":O.liftListItem(e)}}},{key:"name",get:function(){return"todo_item"}},{key:"view",get:function(){return{props:["node","updateAttrs","editable"],methods:{onChange:function(){this.updateAttrs({done:!this.node.attrs.done})}},template:'\n        <li :data-type="node.type.name" :data-done="node.attrs.done.toString()">\n          <span class="todo-checkbox" contenteditable="false" @click="onChange"></span>\n          <div class="todo-content" ref="content" :contenteditable="editable.toString()"></div>\n        </li>\n      '}}},{key:"schema",get:function(){var n=this;return{attrs:{done:{default:!1}},draggable:!0,content:"paragraph",toDOM:function(t){var e=t.attrs.done;return["li",{"data-type":n.name,"data-done":e.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]'),getAttrs:function(t){return{done:"true"===t.getAttribute("data-done")}}}]}}}]),e}(),H=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Node),c(e,[{key:"commands",value:function(t){var e=t.type;return function(){return O.wrapInList(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[O.wrappingInputRule(/^\s*(\[ \])\s$/,e)]}},{key:"name",get:function(){return"todo_list"}},{key:"schema",get:function(){var t=this;return{group:"block",content:"todo_item+",toDOM:function(){return["ul",{"data-type":t.name},0]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]')}]}}}]),e}(),W=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Mark),c(e,[{key:"keys",value:function(t){var e=t.type;return{"Mod-b":O.toggleMark(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return O.toggleMark(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[O.markInputRule(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[O.markPasteRule(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,e)]}},{key:"name",get:function(){return"bold"}},{key:"schema",get:function(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!==t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong",0]}}}}]),e}(),z=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Mark),c(e,[{key:"keys",value:function(t){var e=t.type;return{"Mod-`":O.toggleMark(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return O.toggleMark(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[O.markInputRule(/(?:`)([^`]+)(?:`)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[O.markPasteRule(/(?:`)([^`]+)(?:`)/g,e)]}},{key:"name",get:function(){return"code"}},{key:"schema",get:function(){return{parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}}}}]),e}(),K=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Mark),c(e,[{key:"keys",value:function(t){var e=t.type;return{"Mod-i":O.toggleMark(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return O.toggleMark(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[O.markInputRule(/(?:^|[^*_])(?:\*|_)([^*_]+)(?:\*|_)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[O.markPasteRule(/(?:^|[^*_])(?:\*|_)([^*_]+)(?:\*|_)/g,e)]}},{key:"name",get:function(){return"italic"}},{key:"schema",get:function(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}}}}]),e}(),F=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Mark),c(e,[{key:"commands",value:function(t){var e=t.type;return function(t){return t.href?O.updateMark(e,t):O.removeMark(e)}}},{key:"pasteRules",value:function(t){var e=t.type;return[O.pasteRule(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,e,function(t){return{href:t}})]}},{key:"name",get:function(){return"link"}},{key:"schema",get:function(){return{attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href")}}}],toDOM:function(t){return["a",C({},t.attrs,{rel:"noopener noreferrer nofollow"}),0]}}}},{key:"plugins",get:function(){return[new l.Plugin({props:{handleClick:function(t,e){var n=t.state,r=n.schema,o=n.doc,i=n.tr,u=f.getMarkRange(o.resolve(e),r.marks.link);if(u){var a=o.resolve(u.from),c=o.resolve(u.to),s=i.setSelection(new l.TextSelection(a,c));t.dispatch(s)}}}})]}}]),e}(),G=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Mark),c(e,[{key:"keys",value:function(t){var e=t.type;return{"Mod-d":O.toggleMark(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return O.toggleMark(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[O.markInputRule(/~([^~]+)~$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[O.markPasteRule(/~([^~]+)~/g,e)]}},{key:"name",get:function(){return"strike"}},{key:"schema",get:function(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function(t){return"line-through"===t}}],toDOM:function(){return["s",0]}}}}]),e}(),U=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Mark),c(e,[{key:"keys",value:function(t){var e=t.type;return{"Mod-u":O.toggleMark(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return O.toggleMark(e)}}},{key:"name",get:function(){return"underline"}},{key:"schema",get:function(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:function(t){return"underline"===t}}],toDOM:function(){return["u",0]}}}}]),e}(),V=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Extension),c(e,[{key:"keys",value:function(){var t="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),e={"Mod-z":r.undo,"Shift-Mod-z":r.redo};return t||(e["Mod-y"]=r.redo),e}},{key:"commands",value:function(){return{undo:function(){return r.undo},redo:function(){return r.redo}}}},{key:"name",get:function(){return"history"}},{key:"defaultOptions",get:function(){return{depth:"",newGroupDelay:""}}},{key:"plugins",get:function(){return[r.history({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}}]),e}(),Z=function(t){function e(){return o(this,e),h(this,d(e).apply(this,arguments))}return p(e,l.Extension),c(e,[{key:"name",get:function(){return"placeholder"}},{key:"defaultOptions",get:function(){return{emptyNodeClass:"is-empty",emptyNodeText:"Write something...",showOnlyWhenEditable:!0}}},{key:"update",get:function(){return function(t){t.updateState(t.state)}}},{key:"plugins",get:function(){var i=this;return[new l.Plugin({props:{decorations:function(t){var e=t.doc;if(!(t.plugins.find(function(t){return t.key.startsWith("editable$")}).props.editable()||!i.options.showOnlyWhenEditable))return!1;var r=[],o=""===e.textContent&&e.childCount<=1&&e.content.size<=2;return e.descendants(function(t,e){if(o){var n=g.Decoration.node(e,e+t.nodeSize,{class:i.options.emptyNodeClass,"data-empty-text":i.options.emptyNodeText});r.push(n)}}),g.DecorationSet.create(e,r)}}})]}}]),e}();t.Blockquote=e,t.BulletList=k,t.CodeBlock=b,t.CodeBlockHighlight=x,t.HardBreak=R,t.Heading=_,t.HorizontalRule=T,t.Image=A,t.ListItem=S,t.Mention=E,t.OrderedList=N,t.Table=P,t.TableHeader=$,t.TableCell=j,t.TableRow=L,t.TodoItem=B,t.TodoList=H,t.Bold=W,t.Code=z,t.Italic=K,t.Link=F,t.Strike=G,t.Underline=U,t.History=V,t.Placeholder=Z,t.Suggestions=I,t.Highlight=D,Object.defineProperty(t,"__esModule",{value:!0})});